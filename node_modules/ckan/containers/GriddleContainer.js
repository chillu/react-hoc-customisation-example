import React from 'react';
import Griddle, { RowDefinition, ColumnDefinition } from 'griddle-react';

/**
 * Does not concern itself with data fetching (separation of concerns).
 */
const GriddleContainer = (fields, filters, onNext, columnComponentsForType = {}) => {
  const { data, currentPage } = this.state;

  // The column definition is fairly generic,
  // but the presentation component *within* it is more likely to be customised.
  const cols = filters.map(filter => {
    return <ColumnDefinition {...filter} customComponent={columnComponentsForType[filter.type]} />;
  });

  return (
    <Griddle
      data={data}
      events={{
        onNext: () => onNext(currentPage).then(data => this.setState({ data }))
      }}
    >
      <RowDefinition>
        {cols}
      </RowDefinition>
    </Griddle>
  );
};

export default GriddleContainer;
